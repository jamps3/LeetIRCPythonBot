#!/bin/bash

SESSION_NAME="bot"
VENV_PATH="venv/bin/activate"  # Adjust if your venv is elsewhere
BOT_COMMAND="python3 main.py"

# Check if the tmux session exists
if tmux has-session -t $SESSION_NAME 2>/dev/null; then
    echo "Session $SESSION_NAME already exists. Attaching..."
    tmux attach -t $SESSION_NAME
else
    echo "Starting new tmux session: $SESSION_NAME"
    tmux new-session -d -s $SESSION_NAME
    
    # Activate venv and run the bot inside tmux
    tmux send-keys -t $SESSION_NAME "source $VENV_PATH" C-m
    tmux send-keys -t $SESSION_NAME "$BOT_COMMAND" C-m
    
    tmux attach -t $SESSION_NAME
fi
